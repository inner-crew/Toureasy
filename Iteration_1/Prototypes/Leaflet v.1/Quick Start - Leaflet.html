<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	
	<title>Quick Start - Leaflet</title>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="https://leafletjs.com/examples/quick-start/docs/images/favicon.ico">

    <link rel="stylesheet" href="Quick%20Start%20-%20Leaflet_fichiers/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="">
    <script src="Quick%20Start%20-%20Leaflet_fichiers/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>


	
</head>
<body>



<div id="mapid" style="width: 600px; height: 400px; position: relative; outline: currentcolor none medium;" class="leaflet-container leaflet-touch leaflet-fade-anim leaflet-grab leaflet-touch-drag leaflet-touch-zoom" tabindex="0"><div class="leaflet-pane leaflet-map-pane" style="transform: translate3d(0px, 0px, 0px);"><div class="leaflet-pane leaflet-tile-pane"><div class="leaflet-layer " style="z-index: 1; opacity: 1;"><div class="leaflet-tile-container leaflet-zoom-animated" style="z-index: 18; transform: translate3d(0px, 0px, 0px) scale(1);">
	<img alt="" role="presentation" src="Quick%20Start%20-%20Leaflet_fichiers/silvio.jpg" class="leaflet-tile leaflet-tile-loaded" style="width: 600px; height: 400px; opacity: 1;">
	<!-- en gros si j'ai bien capté c'est 4 images (4 coins de la map) pendant un chargement bah ils s'affichent mdr <img alt="" role="presentation" src="Quick%20Start%20-%20Leaflet_fichiers/1361_002.png" class="leaflet-tile leaflet-tile-loaded" style="width: 512px; height: 512px; transform: translate3d(-200px, -347px, 0px); opacity: 1;">
	<img alt="" role="presentation" src="Quick%20Start%20-%20Leaflet_fichiers/1361.png" class="leaflet-tile leaflet-tile-loaded" style="width: 512px; height: 512px; transform: translate3d(312px, -347px, 0px); opacity: 1;">
	<img alt="" role="presentation" src="Quick%20Start%20-%20Leaflet_fichiers/1362.png" class="leaflet-tile leaflet-tile-loaded" style="width: 512px; height: 512px; transform: translate3d(-200px, 165px, 0px); opacity: 1;">
	<img alt="" role="presentation" src="Quick%20Start%20-%20Leaflet_fichiers/1362_002.png" class="leaflet-tile leaflet-tile-loaded" style="width: 512px; height: 512px; transform: translate3d(312px, 165px, 0px); opacity: 1;"> -->
</div></div></div><div class="leaflet-pane leaflet-shadow-pane"></div><div class="leaflet-pane leaflet-overlay-pane"></div><div class="leaflet-pane leaflet-marker-pane"></div><div class="leaflet-pane leaflet-tooltip-pane"></div><div class="leaflet-pane leaflet-popup-pane"></div><div class="leaflet-proxy leaflet-zoom-animated" style="transform: translate3d(1048050px, 697379px, 0px) scale(4096);"></div></div><div class="leaflet-control-container"><div class="leaflet-top leaflet-left"><div class="leaflet-control-zoom leaflet-bar leaflet-control"><a class="leaflet-control-zoom-in" href="#" title="Zoom in" role="button" aria-label="Zoom in">+</a><a class="leaflet-control-zoom-out" href="#" title="Zoom out" role="button" aria-label="Zoom out">−</a></div></div><div class="leaflet-top leaflet-right"></div><div class="leaflet-bottom leaflet-left"></div><div class="leaflet-bottom leaflet-right"><div class="leaflet-control-attribution leaflet-control"><a href="https://leafletjs.com/" title="A JS library for interactive maps">Leaflet</a> | Map data © <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a></div></div></div></div>

<script>
	var southWest = L.latLng(-89.98155760646617, -180), northEast = L.latLng(89.99346179538875, 180); // get les limites de la map
	var bounds = L.latLngBounds(southWest, northEast); // la définir sous la forme d'une surface

	var mymap = L.map('mapid', {minZoom: 5}).setView([48.8018462,6.6640065], 14); // création de la map

	L.control.scale().addTo(mymap); // affiche l'échelle
	mymap.setMaxBounds(bounds); // def les limites de la carte


	L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
			'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox/streets-v11',
		tileSize: 512,
		zoomOffset: -1,
		keyboard: true,
		setView: true
	}).addTo(mymap);

	var unMonument = {lat: 48.80250, long: 6.667604, TAILLE: 1, description: "<b>Une maison</b><br>c'est celle d'Arthur!"};
	var unAutre = {lat: 48.804, long: 6.667604, TAILLE: 1.5, description: "<h1>Test image!</h1>" +
				"<img alt=\"\"  src=\"Quick%20Start%20-%20Leaflet_fichiers/silvio.jpg\" style=\"width: 100px; height: 100px; opacity: 1;\">" +
				"<br>Il est beau."};
	var monumentTourEiffel = {lat: 48.8583701, long: 2.2939341, TAILLE: 5, description: "<h1>Gros monument exmple</h1>" + "<img alt=\"\"  src=\"Quick%20Start%20-%20Leaflet_fichiers/tourEiffel.jpg\" style=\"width: 300px; height: 100px; opacity: 1;\">"}

	var lesMonuments = [unMonument, unAutre, monumentTourEiffel];

	mymap.on('zoomend', function() {
		var currentZoom = mymap.getZoom();
		console.log("Niveau de zoom : " + currentZoom);

		mymap.eachLayer(function (layer) {
			if (layer instanceof L.Marker) {
				layer.remove();
			}
		});

		lesMonuments.forEach(function (unMonu) {
			let stanislas = L.icon({
				iconUrl: 'Quick%20Start%20-%20Leaflet_fichiers/mark.png',
				shadowUrl: 'Quick%20Start%20-%20Leaflet_fichiers/ombre.png',

				iconSize:     [(Math.exp(currentZoom/4))*unMonu.TAILLE, (Math.exp(currentZoom/4)*1.5)*unMonu.TAILLE], // taille de l'icone
				shadowSize:   [(Math.exp(currentZoom/4)*0.8)*unMonu.TAILLE, ((Math.exp(currentZoom/4)*1.5)*0.8)*unMonu.TAILLE], // taille de l'ombre
				iconAnchor:   [(Math.exp(currentZoom/4)/2)*unMonu.TAILLE, (Math.exp(currentZoom/4)*1.5)*unMonu.TAILLE], // point d'ancrage de l'icone
				shadowAnchor: [((Math.exp(currentZoom/4)*0.8)/200)*unMonu.TAILLE, ((Math.exp(currentZoom/4)*1.5)*0.8)*unMonu.TAILLE],  // de même pour l'ombre
				popupAnchor:  [(0)*unMonu.TAILLE, (-Math.exp(currentZoom/4)*1.5)*unMonu.TAILLE] // point d'ancrage de la description en lien avec l'iconAnchor
			});

			let marker = L.marker([unMonu.lat, unMonu.long], {icon: stanislas}).addTo(mymap);
			marker.bindPopup(unMonu.description);
		});
	});

	mymap.on('drag', function() {
		mymap.panInsideBounds(bounds, { animate: false });
	});
	
	mymap.locate({setView: true, maxZoom: 16});
</script>

</body></html>